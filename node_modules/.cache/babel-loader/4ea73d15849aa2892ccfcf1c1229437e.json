{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar type_validate_1 = require(\"./type-validate\");\n\nfunction createActionValidator(type, payloadSchema, payloadRequired, idRequired) {\n  if (payloadSchema === void 0) {\n    payloadSchema = undefined;\n  }\n\n  if (payloadRequired === void 0) {\n    payloadRequired = false;\n  }\n\n  if (idRequired === void 0) {\n    idRequired = false;\n  }\n\n  var idSchema = type_validate_1.matchesObject({\n    id: idRequired ? type_validate_1.matchesString() : type_validate_1.makeOptional(type_validate_1.matchesString())\n  });\n  var schema = payloadSchema ? type_validate_1.composeSchemas(idSchema, payloadSchema) : idSchema;\n  return type_validate_1.matchesObject({\n    type: type_validate_1.matchesEnum(type, {\n      message: function (_, val) {\n        return \"The action type `\" + val + \"` is invalid or unsupported\";\n      }\n    }),\n    payload: payloadRequired ? schema : type_validate_1.makeOptional(schema)\n  });\n}\n\nexports.createActionValidator = createActionValidator;\n\nfunction actionMessage(errors) {\n  return errors.map(function (err) {\n    var path = err.path,\n        error = err.error,\n        message = err.message,\n        value = err.value;\n    var valueStr = typeof value === 'object' ? JSON.stringify(value) : value;\n    return \"`\" + error + \"` thrown for\" + (path ? \" path: \" + path + \" and\" : '') + \" value: `\" + valueStr + \"`\" + (message ? \" with message: \" + message : '');\n  }).join(' | ');\n}\n\nexports.actionMessage = actionMessage;\n\nfunction isValidRelativePath(path) {\n  return typeof path === 'string' && (path === '' || path.startsWith('/'));\n}\n\nexports.isValidRelativePath = isValidRelativePath;\nexports.relativePathSchema = type_validate_1.matchesObject({\n  path: type_validate_1.composeSchemas(type_validate_1.matchesString(), function (value) {\n    return isValidRelativePath(value) ? undefined : [{\n      error: 'invalid_relative_path',\n      value: value,\n      message: 'expected string to start with `/`'\n    }];\n  })\n});","map":null,"metadata":{},"sourceType":"script"}